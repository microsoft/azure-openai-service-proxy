@page "/models"

@namespace AzureOpenAIProxy.Management.Components.Pages

<PageTitle>AI Proxy Resources</PageTitle>

<MudStack>
    <MudStack Row="true">
        <MudText Typo="Typo.h6">Resources</MudText>
        <MudSpacer />
        <MudLink Target="_blank" Href="https://microsoft.github.io/azure-openai-service-proxy/resources">
            <MudIcon Icon="@Icons.Material.Filled.Help" />
        </MudLink>
    </MudStack>

    <MudButton Variant="Variant.Filled" Color="Color.Primary" Href="/models/new" Style="max-width: 200px">
        <MudIcon Icon="@Icons.Material.Filled.Add" />
        New Resource
    </MudButton>


    <MudTable Items="@Models" Loading="@(Models is null)" LoadingProgressColor="Color.Info" Hover="true" Dense="true" Striped="true" Breakpoint="Breakpoint.Sm">
        <HeaderContent>
            <MudTh>Friendly Name</MudTh>
            <MudTh>Resource Name</MudTh>
            <MudTh>Resource Type</MudTh>
            <MudTh>Location</MudTh>
            <MudTh>Active</MudTh>
            <MudTh></MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="FriendlyName">
               <MudText Color="Color.Primary"> @context.FriendlyName</MudText>
            </MudTd>
            <MudTd DataLabel="DeploymentName">@context.DeploymentName</MudTd>
            <MudTd DataLabel="ModelType">@(context.ModelType!.Value.ToString().Replace("_", " "))</MudTd>
            <MudTd DataLabel="Location">@(context.Location)</MudTd>
            <MudTd DataLabel="Active">@(context.Active ? "Yes" : "No")</MudTd>
            <MudTd>
                <MudStack Row="true" Spacing="1">
                    <MudIconButton Icon="@Icons.Material.Filled.Edit" Color="Color.Primary" Href="@($"/models/{context.CatalogId}")" />
                    <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Primary" @onclick="() => OpenDialog(context)" />
                </MudStack>
            </MudTd>
        </RowTemplate>
    </MudTable>

</MudStack>
